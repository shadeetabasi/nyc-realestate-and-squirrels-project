<!DOCTYPE HTML>
<html lang="en">
	<head>
		<title>Leaflet Map</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
		<meta name="description" content="" />
		<meta name="keywords" content="" />
		<link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Raleway:200,300,400,500,600">
		<link rel="stylesheet" type="text/css" href="{{ url_for('static', filename= 'css/font-awesome.min.css') }}">
		<link rel="stylesheet" type="text/css" href="{{ url_for('static', filename= 'css/main.css') }}">		
		<link rel="stylesheet" href="https://unpkg.com/leaflet@1.3.3/dist/leaflet.css"
  integrity="sha512-Rksm5RenBEKSKFjgI3a41vrjkw4EVPlJ3+OiI65vTjIdo9brlAacEuKOiQ5OFh7cOI1bkDwLqdLw3Zg0cRJAAQ=="
  crossorigin=""/>
	</head>
	<body class="is-preload">

		<!-- Header -->
			<header id="header">
				<a class="logo" href="./index">NYC Real Estate & Trees</a>
				<nav>
					<a href="#menu">Menu</a>
				</nav>
			</header>

		<!-- Nav -->
			<nav id="menu">
				<ul class="links">
					<li><a href="index">Home</a></li>
					<li><a href="leafletmap">Mapping NYC</a></li>
					<li><a href="treedashboard">NYC Trees Dashboard</a></li>
					<li><a href="realestatedashboard">NYC Real Estate Dashboard</a></li>
				</ul>
			</nav>

		<!-- Heading -->
			<div id="heading" >
				<h1>Leaflet Map</h1>
			</div>

		<!-- Main -->
			<section id="main" class="wrapper">
				<div class="inner">
					<header>
						<h2>Feugiat consequat</h2>
					</header>
					<p>Lorem ipsum dolor sit accumsan interdum nisi, quis tincidunt felis sagittis eget. tempus euismod. Magna et cursus lorem faucibus vestibulum. Blandit adipiscing eu felis iaculis volutpat ac adipiscing accumsan eu faucibus. Integer ac pellentesque praesent tincidunt felis sagittis eget. tempus euismod tempus. Vestibulum ante ipsum primis in faucibus vestibulum. Blandit adipiscing eu felis iaculis volutpat ac adipiscing accumsan eu faucibus. Integer ac pellentesque praesent tincidunt felis sagittis eget. tempus euismod. Vestibulum ante ipsum primis in faucibus vestibulum. Blandit adipiscing eu felis iaculis volutpat ac adipiscing accumsan eu faucibus. Integer ac sed amet praesent. Nunc lacinia ante nunc ac gravida lorem ipsum dolor sit amet dolor feugiat consequat. </p>
					<p>Lorem ipsum dolor sit accumsan interdum nisi, quis tincidunt felis sagittis eget. tempus euismod. Magna et cursus lorem faucibus vestibulum. Blandit adipiscing eu felis iaculis volutpat ac adipiscing accumsan eu faucibus. Integer ac pellentesque praesent tincidunt felis sagittis eget. tempus euismod tempus. Vestibulum ante ipsum primis in faucibus vestibulum. Blandit adipiscing eu felis iaculis volutpat ac adipiscing accumsan eu faucibus. Integer ac pellentesque praesent tincidunt felis sagittis eget. tempus euismod. Vestibulum ante ipsum primis in faucibus vestibulum. Blandit adipiscing eu felis iaculis volutpat ac adipiscing accumsan eu faucibus. Integer ac sed amet praesent. Nunc lacinia ante nunc ac gravida lorem ipsum dolor sit amet dolor feugiat consequat. </p>
					<hr />
					<h3>Magna odio tempus commodo</h3>
					<p>In arcu accumsan arcu adipiscing accumsan orci ac. Felis id enim aliquet. Accumsan ac integer lobortis commodo ornare aliquet accumsan erat tempus amet porttitor. Ante commodo blandit adipiscing integer semper orci eget. Faucibus commodo adipiscing mi eu nullam accumsan morbi arcu ornare odio mi adipiscing nascetur lacus ac interdum morbi accumsan vis mi accumsan ac praesent.</p>
					<p>Felis sagittis eget tempus primis in faucibus vestibulum. Blandit adipiscing eu felis iaculis volutpat ac adipiscing accumsan eu faucibus. Integer ac pellentesque praesent tincidunt felis sagittis eget. tempus euismod. Magna sed etiam ante ipsum primis in faucibus vestibulum. Blandit adipiscing eu ipsum primis in faucibus vestibulum. Blandit adipiscing eu felis iaculis volutpat ac adipiscing accumsan eu faucibus lorem ipsum dolor sit amet nullam.</p>
					
					<div id="leafletmap" style="height: 500px"></div>
				</div>
			</section>

		<!-- Footer -->
        <footer id="footer">
            <div class="inner">
                <div class="content">
                    <section>
                        <h3>About the Project</h3>
                        <p>Summary, time, generic info</p>
                    </section>

                    <section>
                        <h4>Github</h4>
                        <ul class="plain">
                            <li><a href="https://github.com/keikoyara"><i class="icon fa-github">&nbsp;</i>Keiko Yara</a></li>
								<li><a href="https://github.com/shadeetabasi"><i class="icon fa-github">&nbsp;</i>Shadee Tabasi</a></li>
								<li><a href="https://github.com/dramane188"><i class="icon fa-github">&nbsp;</i>Dramane Nebie</a></li>
								<li><a href="https://github.com/JPG91"><i class="icon fa-github">&nbsp;</i>Jean-Pierre Gilbert</a></li>
                        </ul>
                    </section>
                </div>
                <div class="copyright">
                    &copy; Untitled. Photos <a href="https://unsplash.co">Unsplash</a>, Video <a href="https://coverr.co">Coverr</a>.
                </div>
            </div>
        </footer>

	<!-- Scripts -->
		<!-- Custom -->
		<script src="/static/js/jquery.min.js"></script>
		<script src="/static/js/browser.min.js"></script>
		<script src="/static/js/breakpoints.min.js"></script>
		<script src="/static/js/util.js"></script>
		<script src="/static/js/main.js"></script>
		
		<!-- Leaflet JavaScript -->
		<script src="https://unpkg.com/leaflet@1.3.3/dist/leaflet.js"
		integrity="sha512-tAGcCfR4Sc5ZP5ZoVz0quoZDYX5aCtEm/eu1KhSLj2c9eFrylXZknQYmxUssFaVJKvvc0dJQixhGjG2yXWiV9Q=="
		crossorigin=""></script>
		<script src="/static/js/heat.js"></script>
		<link rel="stylesheet" type="text/css" href="https://unpkg.com/leaflet.markercluster@1.0.3/dist/MarkerCluster.css">
		<link rel="stylesheet" type="text/css" href="https://unpkg.com/leaflet.markercluster@1.0.3/dist/MarkerCluster.Default.css">
		<script type="text/javascript" src="https://unpkg.com/leaflet.markercluster@1.0.3/dist/leaflet.markercluster.js"></script>
	
		<!-- D3 -->
		<script src="https://cdnjs.cloudflare.com/ajax/libs/d3/4.5.0/d3.min.js"></script>
		<script src="/static/js/config.min.js"></script>
        <script src="/static/js/logic2.min.js"></script>

		
		<script>
			var raw_data = JSON.parse('{{ map_data | tojson | safe}}');

			var heatArray = [];

			for (var i = 0; i < raw_data.length; i++) {
				heatArray.push(raw_data[i]["latitude"], raw_data[i]["longitude"]);
			}

			const API_KEY = "pk.eyJ1Ijoic2hhZGVldGFiYXNpIiwiYSI6ImNrbTVpaG05ajBlczgydnFzcDNneG1qNnAifQ.gq0fRcM5vgCz4V7lSJUCFg";

			var myMap = L.map("leafletmap", {
				center: [40.7128, -74.0059],
				zoom: 11
			});

			// Adding tile layer
			L.tileLayer("https://api.mapbox.com/styles/v1/{id}/tiles/{z}/{x}/{y}?access_token={accessToken}", {
				attribution: "© <a href='https://www.mapbox.com/about/maps/'>Mapbox</a> © <a href='http://www.openstreetmap.org/copyright'>OpenStreetMap</a> <strong><a href='https://www.mapbox.com/map-feedback/' target='_blank'>Improve this map</a></strong>",
				tileSize: 512,
				maxZoom: 18,
				zoomOffset: -1,
				id: "mapbox/streets-v11",
				accessToken: API_KEY
			}).addTo(myMap);

			function chooseColor(borough) {
				switch (borough) {
				case "Brooklyn":
					return "yellow";
				case "Bronx":
					return "red";
				case "Manhattan":
					return "orange";
				case "Queens":
					return "green";
				case "Staten Island":
					return "purple";
				default:
					return "black";
				}
			}
			var link = "/static/data/nyc.geojson";

			// Grabbing our GeoJSON data..
			d3.json(link, function(data) {
			// Creating a geoJSON layer with the retrieved data
			L.geoJson(data, {
				style: function(feature) {
				return {
					color: "white",
					fillColor: chooseColor(feature.properties.borough),
					fillOpacity: 0.5,
					weight: 1.5
				};
				}
			}).addTo(myMap);
			});

			// // HEAT MAP
			// var heat = L.heatLayer(heatArray, {
			// 	radius: 20,
			// 	blur: 35
			// }).addTo(myMap);


			// Create a new marker cluster group
			var markers = L.markerClusterGroup();
			// Loop through data
			for (var i = 0; i < raw_data.length; i++) {
				// Add a new marker to the cluster group and bind a pop-up
				markers.addLayer(L.marker([raw_data[i].latitude, raw_data[i].longitude])
				.bindPopup(raw_data[i].spc_common));
			}
			// Add our marker cluster layer to the map
			myMap.addLayer(markers);

		</script>
		
		

</body>
</html>